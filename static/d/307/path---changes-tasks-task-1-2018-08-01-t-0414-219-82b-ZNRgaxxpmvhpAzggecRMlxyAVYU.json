{"data":{"markdownRemark":{"html":"<p>added task-1 plan step-5</p>\n<pre><code class=\"language-diff\">@@ -196,3 +196,150 @@ litlog created tasks/task-1 \"added plan step-1 to step-4\"\n git add sites\n git commit -m \"added request-1 spec and task-1 plan step-1 to step-4\"\n</code></pre>\n<p>+1. Follow <a href=\"https://next.gatsbyjs.org/tutorial/part-six/\">part-six</a> of the [Gatsby.js Tutorial] so <g-link to=\"/litlog/\">litlog</g-link> pages can be listed. Structure <em>gatsby-node.js</em> more like <a href=\"https://github.com/greglobinski/gatsby-starter-hero-blog\">gatsby-starter-hero-blog</a> so other content types can be added later.\n+<code>bash +export LITLOG_SITE=site-1 +diff package.json sites/site-1/files/package.json +litlog updating tasks/task1 +npm install --save gatsby-transformer-remark +git apply &#x3C;&#x3C; EOF +>--- a/sites/site-1/files/package.json +>+++ b/sites/site-1/files/package.json +>@@ -6,6 +6,7 @@ +> \"dependencies\": { +> \"gatsby\": \"next\", +> \"gatsby-plugin-react-helmet\": \"next\", +>+ \"gatsby-transformer-remark\": \"^1.7.44\", +> \"react\": \"^16.4.1\", +> \"react-dom\": \"^16.4.1\", +> \"react-helmet\": \"^5.2.0\" +EOF +cp package-lock.json sites/$LITLOG_SITE/files/ +litlog updated files/package.json \"ran 'npm install --save gatsby-transformer-remark' (following [part-six](https://next.gatsbyjs.org/tutorial/part-six/) of the [Gatsby.js Tutorial])\" +# commit these files because I'm going to run another npm install +git add sites +git commit -m \"ran 'npm install --save gatsby-transformer-remark'\" +npm install --save gatsby-source-filesystem +git apply &#x3C;&#x3C; EOF +>--- a/sites/site-1/files/package.json +>+++ b/sites/site-1/files/package.json +>@@ -6,6 +6,7 @@ +> \"dependencies\": { +> \"gatsby\": \"next\", +> \"gatsby-plugin-react-helmet\": \"next\", +>+ \"gatsby-source-filesystem\": \"^1.5.39\", +> \"gatsby-transformer-remark\": \"^1.7.44\", +> \"react\": \"^16.4.1\", +> \"react-dom\": \"^16.4.1\", +EOF +cp package-lock.json sites/$LITLOG_SITE/files/ +litlog updated files/package.json \"ran 'npm install --save gatsby-source-filesystem' (following [part-six](https://next.gatsbyjs.org/tutorial/part-six/) of the [Gatsby.js Tutorial])\" +litlog updating files/gatsby-config.js +# update file +git apply &#x3C;&#x3C; EOF +>--- a/sites/site-1/files/gatsby-config.js +>+++ a/sites/site-1/files/gatsby-config.js +>@@ -2,6 +2,16 @@ module.exports = { +> siteMetadata: { +> title: 'Gatsby Litlog Starter', +> }, +>- plugins: ['gatsby-plugin-react-helmet'], +>+ plugins: [ +>+ 'gatsby-plugin-react-helmet', +>+ { +>+ resolve: 'gatsby-source-filesystem', +>+ options: { +>+ name: 'litlog', +>+ path: \\`\\${__dirname}/src/pages/litlog\\`, +>+ }, +>+ }, +>+ 'gatsby-transformer-remark', +>+ ], +> pathPrefix: '/gatsby-starter-litlog' +> } +EOF +litlog updated files/gatsby-config.js \"following [part-six](https://next.gatsbyjs.org/tutorial/part-six/) of the [Gatsby.js Tutorial]\" +# restart dev server +npm run site-develop +</code>\n+Check out this query in <a href=\"http://localhost:8000/___graphql\">GraphiQL</a>:\n+`<code></code>graphql\n+{</p>\n<ul>\n<li>allMarkdownRemark(sort: {fields: [fileAbsolutePath] }) {</li>\n<li>totalCount</li>\n<li>edges {</li>\n<li>node {</li>\n<li>id</li>\n<li>fileAbsolutePath</li>\n<li>frontmatter {</li>\n<li>title</li>\n<li>}</li>\n<li>}</li>\n<li>}</li>\n<li>\n<p>}\n+}\n+<code>+Create the index page for the &#x3C;g-link to=\"/litlog/\">litlog&#x3C;/g-link> folder folder. Right now it will just list the *fileAbsolutePath* of the markdown files and the *title* from the frontmatter. +</code>bash\n+litlog creating files/src/pages/litlog/index.js\n+# edit file and check out <a href=\"http://localhost:8000/litlog/\">http://localhost:8000/litlog/</a>\n+touch <strong>blank\n+git apply &#x3C;&#x3C; EOF\n+>--- a/</strong>blank\n+>+++ b/sites/common/files/src/pages/litlog/index.js\n+>@@ -0,0 +1,47 @@\n+>+import React from 'react'\n+>+import Layout from '../../components/layout'\n+>+import { graphql } from 'gatsby'\n+>+\n+>+export default ({ data }) => {\n+>+  return (\n+>+    <Layout>\n+>+      <table>\n+>+        <thead>\n+>+          <tr>\n+>+            <th>fileAbsolutePath</th>\n+>+            <th>title</th>\n+>+          </tr>\n+>+        </thead>\n+>+        <tbody>\n+>+          {data.allMarkdownRemark.edges.map(({ node }, index) =>\n+>+            <tr key={index}>\n+>+              <td>\n+>+                {node.fileAbsolutePath}\n+>+              </td>\n+>+              <td>\n+>+                {node.frontmatter.title}\n+>+              </td>\n+>+            </tr>\n+>+          )}\n+>+        </tbody>\n+>+      </table>\n+>+    </Layout>\n+>+  );\n+>+};\n+>+\n+>+export const query = graphql`\n+>+  {\n+>+    allMarkdownRemark(sort: { fields: [fileAbsolutePath] }) {\n+>+      totalCount\n+>+      edges {\n+>+        node {\n+>+          id\n+>+          fileAbsolutePath\n+>+          frontmatter {\n+>+            title\n+>+          }\n+>+        }\n+>+      }\n+>+    }\n+>+  }\n+>+`;\n+EOF\n+rm __blank\n+cp sites/common/files/src/pages/litlog/index.js sites/site-1/files/src/pages/litlog/\n+litlog created files/src/pages/litlog/index.js \"following <a href=\"https://next.gatsbyjs.org/tutorial/part-six/\">part-six</a> of the [Gatsby.js Tutorial], simplified to return fewer/different fields and use a table\"\n+litlog updated tasks/task-1 \"added task-1 plan step-5\"\n+git add sites\n+git commit -m \"added task-1 plan step-5\"\n+`<code></code></p>\n<pre><code></code></pre>\n</li>\n</ul>","frontmatter":{"title":"Update"}}},"pageContext":{"slug":"/changes/tasks/task-1/2018-08-01T0414/"}}