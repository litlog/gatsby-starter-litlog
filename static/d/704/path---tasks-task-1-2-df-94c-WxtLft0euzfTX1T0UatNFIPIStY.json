{"data":{"markdownRemark":{"html":"<h2>Plan</h2>\n<ol>\n<li>\n<p>create @litlog/litlog-cli to automate the documentation of changes (undocumented).</p>\n<pre><code class=\"language-bash\">mkdir gatsby-starter-litlog\ncd gatsby-starter-litlog\ngit init\nmkdir packages\ncp -R ../gatsby-starter-litlog-1/packages/litlog-cli/ packages/\ncat &#x3C;&#x3C; EOF > .gitignore\nnode_modules\npackages/*/lib\nEOF\ncd packages/litlog-cli/\nnpm link\ngit add .\ngit commit -m \"litlog-cli v0.0.11\"\n</code></pre>\n</li>\n<li>\n<p>create new <a href=\"https://next.gatsbyjs.org/\">Gatsby</a> site from <a href=\"https://github.com/gatsbyjs/gatsby-starter-default/tree/v2\">the default starter</a></p>\n<pre><code class=\"language-bash\"># already have npm and git installed\n# run in a bash terminal\nnpm install --global gatsby-cli\n# or npm update --global gatsby-cli\ngatsby_new_timestamp=$(date +%Y-%m-%dT%H%M)\ncd ..\ngatsby new gatsby-starter-temp https://github.com/gatsbyjs/gatsby-starter-default#v2\necho $gatsby_new_timestamp\n# 2018-07-30T0923\ncd gatsby-starter-litlog\nrm -r ../gatsby-starter-temp/node_modules\n# node_modules/\n# packages/*/lib\ncp -R ../gatsby-starter-temp/* .\ncp ../gatsby-starter-temp/.gitignore .\ncp ../gatsby-starter-temp/.prettierrc .\nnpm install\ngatsby develop\n# update .gitignore for packages\ncat &#x3C;&#x3C; EOF >> .gitignore\n</code></pre>\n</li>\n</ol>\n<h1>Built source for packages</h1>\n<p>packages/*/lib\nEOF</p>\n<h1>move everything except .gitignore to site folder</h1>\n<h1>.gitignore</h1>\n<h1>.prettierrc</h1>\n<h1>LICENSE</h1>\n<h1>README.md</h1>\n<h1>gatsby-browser.js</h1>\n<h1>gatsby-config.js</h1>\n<h1>gatsby-node.js</h1>\n<h1>gatsby-ssr.js</h1>\n<h1>package.json</h1>\n<h1>package-lock.json</h1>\n<h1>src/components/header.js</h1>\n<h1>src/components/layout.css</h1>\n<h1>src/components/layout.js</h1>\n<h1>src/pages/404.js</h1>\n<h1>src/pages/index.js</h1>\n<h1>src/pages/page-2.js</h1>\n<p>export LITLOG_SITE=site-1</p>\n<h1>incorporate into 'litlog init' command</h1>\n<p>mkdir sites/\nmkdir sites/$LITLOG<em>SITE/\nmkdir sites/$LITLOG</em>SITE/files\nmkdir sites/$LITLOG<em>SITE/files/src\nmkdir sites/$LITLOG</em>SITE/files/src/components\nmkdir sites/$LITLOG_SITE/files/src/pages</p>\n<h1></h1>\n<p>mv .prettierrc sites/$LITLOG<em>SITE/files\nmv LICENSE sites/$LITLOG</em>SITE/files\nmv README.md sites/$LITLOG<em>SITE/files\nmv gatsby-browser.js sites/$LITLOG</em>SITE/files\nmv gatsby-config.js sites/$LITLOG<em>SITE/files\nmv gatsby-node.js sites/$LITLOG</em>SITE/files\nmv gatsby-ssr.js sites/$LITLOG<em>SITE/files\nmv package-lock.json sites/$LITLOG</em>SITE/files\nmv package.json sites/$LITLOG<em>SITE/files\nmv src/components/header.js sites/$LITLOG</em>SITE/files/src/components/\nmv src/components/layout.css sites/$LITLOG<em>SITE/files/src/components/\nmv src/components/layout.js sites/$LITLOG</em>SITE/files/src/components/\nmv src/pages/404.js sites/$LITLOG<em>SITE/files/src/pages\nmv src/pages/index.js sites/$LITLOG</em>SITE/files/src/pages\nmv src/pages/page-2.js sites/$LITLOG_SITE/files/src/pages</p>\n<h1>put into changes</h1>\n<p>export gatsby<em>new</em>timestamp=2018-07-30T0923\nlitlog created files/.prettierrc \"Ran 'gatsby new $LITLOG<em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby</em>new<em>timestamp\nlitlog created files/LICENSE \"Ran 'gatsby new $LITLOG</em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby<em>new</em>timestamp\nlitlog created files/README.md \"Ran 'gatsby new $LITLOG<em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby</em>new_timestamp</p>\n<h1>I'm leaving out package-lock.json because it's automatically generated.</h1>\n<p>litlog created files/gatsby-browser.js \"Ran 'gatsby new $LITLOG<em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby</em>new<em>timestamp\nlitlog created files/gatsby-config.js \"Ran 'gatsby new $LITLOG</em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby<em>new</em>timestamp\nlitlog created files/gatsby-node.js \"Ran 'gatsby new $LITLOG<em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby</em>new<em>timestamp\nlitlog created files/gatsby-ssr.js \"Ran 'gatsby new $LITLOG</em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby<em>new</em>timestamp\nlitlog created files/package.json \"Ran 'gatsby new $LITLOG<em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby</em>new<em>timestamp\nlitlog created files/src/components/header.js \"Ran 'gatsby new $LITLOG</em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby<em>new</em>timestamp\nlitlog created files/src/components/layout.css \"Ran 'gatsby new $LITLOG<em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby</em>new<em>timestamp\nlitlog created files/src/components/layout.js \"Ran 'gatsby new $LITLOG</em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby<em>new</em>timestamp\nlitlog created files/src/pages/404.js \"Ran 'gatsby new $LITLOG<em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby</em>new<em>timestamp\nlitlog created files/src/pages/index.js \"Ran 'gatsby new $LITLOG</em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby<em>new</em>timestamp\nlitlog created files/src/pages/page-2.js \"Ran 'gatsby new $LITLOG<em>SITE <a href=\"https://github.com/gatsbyjs/gatsby-starter-default#v2&#x27;\">https://github.com/gatsbyjs/gatsby-starter-default#v2'</a>\" $gatsby</em>new_timestamp</p>\n<h1>commit changes</h1>\n<p>git add .\ngit commit -m \"initial setup from gatsby-starter-default#v2\"</p>\n<h1></h1>\n<h1>modify .gitignore</h1>\n<p>cat &#x3C;&#x3C; EOF >> .gitignore</p>\n<h1>Site files</h1>\n<p>/*\n!LICENSE\n!README.md\n!sites\nEOF</p>\n<h1></h1>\n<h1>when files copied manually gatsby develop runs OK</h1>\n<h1>try copyfiles plus onchange</h1>\n<p>cp sites/$LITLOG_SITE/files/package.json .\nnpm install --save-dev copyfiles\nnpm install --save-dev onchange\nnpm install --save-dev cross-var\nnpm install --save-dev npm-run-parallel\nnpm install --save-dev gh-pages\nnpm install copyfiles -g</p>\n<h1>modify scripts section of packages.json</h1>\n<p>cp package.json sites/$LITLOG<em>SITE/files/\ncp package-lock.json sites/$LITLOG</em>SITE/files/</p>\n<h1>make sure development site runs</h1>\n<p>npm run site-develop</p>\n<h1>make sure site builds</h1>\n<p>npm run build\ngit add .gitignore\ngit add sites\ngit commit -m \"set up for site files\"\ngit remote add origin <a href=\"https://github.com/litlog/gatsby-starter-litlog.git\">https://github.com/litlog/gatsby-starter-litlog.git</a>\ngit push -u origin master</p>\n<pre><code>1. update *pathPrefix* in *gatsby-config.js*.\n```bash\nnpm run site-develop #in a different terminal\nlitlog updating files/gatsby-config.js\n# edit file\ngit apply &#x3C;&#x3C; EOF\n>--- a/sites/site-1/files/gatsby-config.js\n>+++ b/sites/site-1/files/gatsby-config.js\n>@@ -1,6 +1,7 @@\n> module.exports = {\n>   siteMetadata: {\n>-    title: 'Gatsby Default Starter',\n>+    title: 'Gatsby Litlog Starter',\n>   },\n>   plugins: ['gatsby-plugin-react-helmet'],\n>+  pathPrefix: '/gatsby-starter-litlog'\n> }\nEOF\n# note the > above which is not part of the actual command but included\n# because there's an issue rendering diff syntax\nlitlog updated files/gatsby-config.js \"added pathPrefix\"\nlitlog updating files/package.json\n# edit file\ngit apply &#x3C;&#x3C; EOF\n>--- a/sites/site-1/files/package.json\n>+++ b/sites/site-1/files/package.json\n>@@ -19,6 +19,7 @@\n>     \"develop\": \"gatsby develop\",\n>     \"format\": \"prettier --write '**/*.js'\",\n>     \"test\": \"echo \\\"Error: no test specified\\\" &#x26;&#x26; exit 1\",\n>+    \"deploy\": \"npm run site &#x26;&#x26; gatsby build --prefix-paths &#x26;&#x26; gh-pages -d public\",\n>     \"site\": \"cross-var copyfiles --all --up 3 --exclude \\\"**/LICENSE\\\" --exclude \\\"**/README.md\\\" \\\"sites/$LITLOG_SITE/files/**/*\\\" ./\",\n>     \"site-develop\": \"npm-run-parallel site-watch develop\",\n>     \"site-watch\": \"cross-var onchange \\\"sites/$LITLOG_SITE/files/**/*\\\" -- npm run site\"\nEOF\nlitlog updated files/package.json \"added deploy to scripts section\"\nnpm run build\nnpm run deploy\ngit add sites\ngit commit -m \"configured for deploy\"\ngit push origin master\n</code></pre>\n<ol>\n<li>\n<p>create <g-link to=\"/litlog/requests/request-1\">request-1</g-link>, <g-link to=\"/litlog/tasks/task-1\">task-1</g-link>, and commit changes.</p>\n<pre><code class=\"language-bash\">export LITLOG_SITE=site-1\nlitlog creating requests/request-1\n# update request-1 with specification\nlitlog created requests/request-1 \"added specification\"\nlitlog creating tasks/task-1\n# update task-1 with plan including setting title, request, and status\nlitlog created tasks/task-1 \"added plan step-1 to step-4\"\ngit add sites\ngit commit -m \"added request-1 spec and task-1 plan step-1 to step-4\"\n</code></pre>\n</li>\n<li>\n<p>Follow <a href=\"https://next.gatsbyjs.org/tutorial/part-six/\">part-six</a> of the [Gatsby.js Tutorial] so <g-link to=\"/litlog/\">litlog</g-link> pages can be listed. Structure <em>gatsby-node.js</em> more like <a href=\"https://github.com/greglobinski/gatsby-starter-hero-blog\">gatsby-starter-hero-blog</a> so other content types can be added later.</p>\n<pre><code class=\"language-bash\">export LITLOG_SITE=site-1\ndiff package.json sites/site-1/files/package.json\nlitlog updating tasks/task1\nnpm install --save gatsby-transformer-remark\ngit apply &#x3C;&#x3C; EOF\n>--- a/sites/site-1/files/package.json\n>+++ b/sites/site-1/files/package.json\n>@@ -6,6 +6,7 @@\n>   \"dependencies\": {\n>     \"gatsby\": \"next\",\n>     \"gatsby-plugin-react-helmet\": \"next\",\n>+    \"gatsby-transformer-remark\": \"^1.7.44\",\n>     \"react\": \"^16.4.1\",\n>     \"react-dom\": \"^16.4.1\",\n>     \"react-helmet\": \"^5.2.0\"\nEOF\ncp package-lock.json sites/$LITLOG_SITE/files/\nlitlog updated files/package.json \"ran 'npm install --save gatsby-transformer-remark' (following [part-six](https://next.gatsbyjs.org/tutorial/part-six/) of the [Gatsby.js Tutorial])\"\n# commit these files because I'm going to run another npm install\ngit add sites\ngit commit -m \"ran 'npm install --save gatsby-transformer-remark'\"\nnpm install --save gatsby-source-filesystem\ngit apply &#x3C;&#x3C; EOF\n>--- a/sites/site-1/files/package.json\n>+++ b/sites/site-1/files/package.json\n>@@ -6,6 +6,7 @@\n>   \"dependencies\": {\n>     \"gatsby\": \"next\",\n>     \"gatsby-plugin-react-helmet\": \"next\",\n>+    \"gatsby-source-filesystem\": \"^1.5.39\",\n>     \"gatsby-transformer-remark\": \"^1.7.44\",\n>     \"react\": \"^16.4.1\",\n>     \"react-dom\": \"^16.4.1\",\nEOF\ncp package-lock.json sites/$LITLOG_SITE/files/\nlitlog updated files/package.json \"ran 'npm install --save gatsby-source-filesystem' (following [part-six](https://next.gatsbyjs.org/tutorial/part-six/) of the [Gatsby.js Tutorial])\"\nlitlog updating files/gatsby-config.js\n# update file\ngit apply &#x3C;&#x3C; EOF\n>--- a/sites/site-1/files/gatsby-config.js\n>+++ a/sites/site-1/files/gatsby-config.js\n>@@ -2,6 +2,16 @@ module.exports = {\n>   siteMetadata: {\n>     title: 'Gatsby Litlog Starter',\n>   },\n>-  plugins: ['gatsby-plugin-react-helmet'],\n>+  plugins: [\n>+    'gatsby-plugin-react-helmet',\n>+      {\n>+        resolve: 'gatsby-source-filesystem',\n>+        options: {\n>+          name: 'litlog',\n>+          path: \\`\\${__dirname}/src/pages/litlog\\`,\n>+        },\n>+      },\n>+      'gatsby-transformer-remark',\n>+  ],\n>   pathPrefix: '/gatsby-starter-litlog'\n> }\nEOF\nlitlog updated files/gatsby-config.js \"following [part-six](https://next.gatsbyjs.org/tutorial/part-six/) of the [Gatsby.js Tutorial]\"\n# restart dev server\nnpm run site-develop\n</code></pre>\n<p>Check out this query in <a href=\"http://localhost:8000/___graphql\">GraphiQL</a>:</p>\n<pre><code class=\"language-graphql\">{\nallMarkdownRemark(sort: {fields: [fileAbsolutePath] }) {\ntotalCount\nedges {\n  node {\n    id\n    fileAbsolutePath\n    frontmatter {\n      title\n    }\n  }\n}\n}\n}\n</code></pre>\n<p>Create the index page for the <g-link to=\"/litlog/\">litlog</g-link> folder folder. Right now it will just list the <em>fileAbsolutePath</em> of the markdown files and the <em>title</em> from the frontmatter.</p>\n<pre><code class=\"language-bash\">litlog creating files/src/pages/litlog/index.js\n# edit file and check out http://localhost:8000/litlog/\ntouch __blank\ngit apply &#x3C;&#x3C; EOF\n>--- a/__blank\n>+++ b/sites/common/files/src/pages/litlog/index.js\n>@@ -0,0 +1,47 @@\n>+import React from 'react'\n>+import Layout from '../../components/layout'\n>+import { graphql } from 'gatsby'\n>+\n>+export default ({ data }) => {\n>+  return (\n>+    &#x3C;Layout>\n>+      &#x3C;table>\n>+        &#x3C;thead>\n>+          &#x3C;tr>\n>+            &#x3C;th>fileAbsolutePath&#x3C;/th>\n>+            &#x3C;th>title&#x3C;/th>\n>+          &#x3C;/tr>\n>+        &#x3C;/thead>\n>+        &#x3C;tbody>\n>+          {data.allMarkdownRemark.edges.map(({ node }, index) =>\n>+            &#x3C;tr key={index}>\n>+              &#x3C;td>\n>+                {node.fileAbsolutePath}\n>+              &#x3C;/td>\n>+              &#x3C;td>\n>+                {node.frontmatter.title}\n>+              &#x3C;/td>\n>+            &#x3C;/tr>\n>+          )}\n>+        &#x3C;/tbody>\n>+      &#x3C;/table>\n>+    &#x3C;/Layout>\n>+  );\n>+};\n>+\n>+export const query = graphql\\`\n>+  {\n>+    allMarkdownRemark(sort: { fields: [fileAbsolutePath] }) {\n>+      totalCount\n>+      edges {\n>+        node {\n>+          id\n>+          fileAbsolutePath\n>+          frontmatter {\n>+            title\n>+          }\n>+        }\n>+      }\n>+    }\n>+  }\n>+\\`;\nEOF\nrm __blank\ncp sites/common/files/src/pages/litlog/index.js sites/site-1/files/src/pages/litlog/\nlitlog created files/src/pages/litlog/index.js \"following [part-six](https://next.gatsbyjs.org/tutorial/part-six/) of the [Gatsby.js Tutorial], simplified to return fewer/different fields and use a table\"\nlitlog updated tasks/task-1 \"added task-1 plan step-5\"\ngit add sites\ngit commit -m \"added task-1 plan step-5\"\n</code></pre>\n</li>\n</ol>","frontmatter":{"title":"Create a documentation site to record changes to the site"}}},"pageContext":{"slug":"/tasks/task-1/"}}